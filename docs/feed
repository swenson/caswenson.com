<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Christopher Swenson</title>
  <id>http://www.caswenson.com/</id>
  <updated>2018-02-06T08:00:00-00:00</updated>
  <author>
    <name>Christopher Swenson</name>
  </author>
<entry><title>64-bit assembly language programming under macOS with NASM</title><link href="http://swenson.io/2018_02_06_64bit_assembly_language_programming_under_macos_with_nasm.html" rel="alternate" /><id>2018_02_06_64bit_assembly_language_programming_under_macos_with_nasm.html</id><published>2018-02-06T08:00:00-00:00</published><updated>2018-02-06T08:00:00-00:00</updated><author><name>Christopher Swenson</name></author><summary type="html">
&lt;p&gt;Just a quick follow-up to a &lt;a href="http://caswenson.com/2009_09_26_assembly_language_programmi</summary><content type="html">
&lt;p&gt;Just a quick follow-up to a &lt;a href="http://caswenson.com/2009_09_26_assembly_language_programming_under_os_x_with_nasm.html"&gt;previous post on 32-bit assembly language programming for OS X&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I've had a fair amount of interest in this post, surprisingly, so I thought I would update it for the 64-bit Intel world we live in now.
The biggest change is that the calling convention now uses registers instead of the stack &lt;a href="https://courses.cs.washington.edu/courses/cse378/10au/sections/Section1_recap.pdf"&gt;by
default&lt;/a&gt;, and we
use the &lt;code&gt;r*&lt;/code&gt; 64-bit registers instead of the &lt;code&gt;e*&lt;/code&gt; 32-bit registers.&lt;/p&gt;

&lt;p&gt;A huge source of annoyance for me is the way we pass pointers to data.
Now, in macOS, it is necessary for local data pointers to relative to the instruction pointer,
which is most easily accomplished using &lt;code&gt;rel your_data_here&lt;/code&gt; and using &lt;code&gt;lea&lt;/code&gt; instead of a
bare &lt;code&gt;mov&lt;/code&gt;.
This can also be accomplished using the &lt;code&gt;DEFAULT REL&lt;/code&gt; directive, which says that
all addresses in &lt;code&gt;lea&lt;/code&gt; should be &lt;code&gt;rel&lt;/code&gt;.&lt;/p&gt;

&lt;pre name="code" class="nasm"&gt;
BITS 64
DEFAULT REL ; RIP-relative addressing by default
;
; Basic OS X calls to glibc
;
; compile with:
; nasm -g -f macho64 malloc64.asm
; gcc -o a.out malloc64.o
;

; glibc stuff
extern _puts, _printf, _malloc, _free

; static data
section .data

hello_world_str db "Hello world!", 10, 0
int_str db "Address %llx", 10, 0

; code
section .text

global _main

_main:
        ; save registers and align stack
        push rbp
        push r12
        push rbx

        lea  rdi, [hello_world_str]
        call _puts

        mov  rdi, 16
        call _malloc

        ; check if the malloc failed
        test rax, rax
        jz   fail_exit
        mov  rbx, rax

        xor  rax, rax
        mov  rsi, rbx
        lea  rdi, [int_str]
        call _printf

        ; print "A\nB\n..."
        mov [rbx], word 0xD41 ; 'A\n'

        mov r12, 10
_loop:
        mov  rdi, rbx
        call  _puts
        inc  qword [rbx]
        dec  r12
        jnz  _loop

        ; free the malloc'd memory
        mov  rdi, rbx
        call _free

        xor rax, rax
        pop rbx
        pop r12
        pop rbp
        ret

fail_exit:
        mov rax, 1
        pop rbx
        pop r12
        pop rbp
        ret
&lt;/pre&gt;

&lt;p&gt;The output should look something like this:&lt;/p&gt;

&lt;pre&gt;
Hello world!

Address 100200000
A
B
C
D
E
F
G
H
I
J
&lt;/pre&gt;
</content></entry><entry><title>Friendship API</title><link href="http://swenson.io/2018_01_14_friendship_api.html" rel="alternate" /><id>2018_01_14_friendship_api.html</id><published>2018-01-14T21:28:37-00:00</published><updated>2018-01-14T21:28:37-00:00</updated><author><name>Christopher Swenson</name></author><summary type="html">
&lt;p&gt;This weekend, I wrote a quick email application called &lt;a href="http://friendshipapi.com"&gt;Friend</summary><content type="html">
&lt;p&gt;This weekend, I wrote a quick email application called &lt;a href="http://friendshipapi.com"&gt;Friendship API&lt;/a&gt;.
It solves a problem that I have: I am just terrible at staying in touch with my friends via email.
This is a shame: email is really a great tool for keeping in touch.&lt;/p&gt;

&lt;p&gt;Friendship API works like this: it uses ContextIO to look at people you interact with, filter out what looks like spam and business email, and send you a weekly email reminding you that you owe a person an email.&lt;/p&gt;

&lt;p&gt;There's no account or password to manage: the weekly emails contain action links to ignore certain people in the future, generate another reminder, and cancel your subscription.
Hence, I use the term "email application".&lt;/p&gt;

&lt;p&gt;There's also very little storage we have to do: basically, we keep track of email addresses of people who sign up, their ContextIO tokens, what recommendations we send out, and a list of email addresses that the people want to ignore.
If they cancel their subscription, we revoke our ContextIO tokens.&lt;/p&gt;

&lt;h2&gt;Why Python? The Stack&lt;/h2&gt;

&lt;p&gt;It's all built on Python 2.7. Why Python? Because there are a lot of great libraries and utilities that I can leverage to help me write the app quickly (over the weekend).
Sadly, some of the stack was still not ready for Python 3+.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="http://context.io"&gt;ContextIO&lt;/a&gt;: to do the extremely hard work of connecting to people's email accounts. Plus, they have a great   &lt;a href="https://github.com/contextio/Python-ContextIO"&gt;Python API&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://mailgun.com"&gt;Mailgun&lt;/a&gt;: to send emails, which has a dead-simple RESTful API.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://flask.pocoo.org/"&gt;Flask&lt;/a&gt;: a straightforward way to build simple web APIs.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.celeryproject.org/"&gt;Celery&lt;/a&gt;: a wonderful Python-based task queue system.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.sqlalchemy.org/"&gt;SQLAlchemy&lt;/a&gt;: a robust way to deal with SQL databases.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://heroku.com"&gt;Heroku&lt;/a&gt;: an easy way to host the email application.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://aws.amazon.com/s3/"&gt;Amazon S3&lt;/a&gt;: an easy way to host a simple static website.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://themeforest.net/?ref=swenson"&gt;ThemeForest&lt;/a&gt;: a cheap way to get an website theme that looks good.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.amazon.com/gp/product/B003I81BW2/ref=as_li_tl?ie=UTF8&amp;amp;camp=1789&amp;amp;creative=9325&amp;amp;creativeASIN=B003I81BW2&amp;amp;linkCode=as2&amp;amp;tag=mathfigu-20&amp;amp;linkId=KN3HZJLTADLF6DFJ"&gt;Diet Dr Pepper&lt;/a&gt;: my choice of caffeine to keep me typing throughout the weekend. :)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Massive thanks to the hard work of those who wrote the stack I stand on.&lt;/p&gt;

&lt;h2&gt;The Process&lt;/h2&gt;

&lt;p&gt;How does one go about writing an app like this after getting the idea and setting
aside a spare weekend? Well, here's the process I followed at least:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Outline in your head (or write down) the features that you need to launch with.&lt;/li&gt;
&lt;li&gt;Talk it over with someone.&lt;/li&gt;
&lt;li&gt;Sign up for all of the accounts you might need and don't already have (in this case, the ContextIO developer account).&lt;/li&gt;
&lt;li&gt;Write a simple program to prove that the hard things are possible: in this case, that is reasonable to use ContextIO to get the data we need, and then to generate sensible recommendations.&lt;/li&gt;
&lt;li&gt;Use Celery to make the program calls asynchronous.&lt;/li&gt;
&lt;li&gt;Write a simple Flask app that calls into that program.&lt;/li&gt;
&lt;li&gt;Use &lt;a href="http://requestb.in/"&gt;RequestBin&lt;/a&gt; to capture the ContextIO callback, so you know how to capture the authentication token when someone signs in.&lt;/li&gt;
&lt;li&gt;Write the Flask endpoints to generate a ContextIO signup session, and the Flask endpoint to capture the ContextIO callback information, and process based on that.&lt;/li&gt;
&lt;li&gt;Hook up the recommendation function to send out an email.&lt;/li&gt;
&lt;li&gt;Write a barebones web page that calls out to your web site.&lt;/li&gt;
&lt;li&gt;Setup hosting for everything.&lt;/li&gt;
&lt;li&gt;Have someone who isn't you test out the flow.&lt;/li&gt;
&lt;li&gt;Write the rest of the functions for your bare minimum features.&lt;/li&gt;
&lt;li&gt;Theme the static site.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;That was fun!&lt;/p&gt;

&lt;h1&gt;Future Improvements&lt;/h1&gt;

&lt;p&gt;There are a few more things that would be nice to do for the application.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Better recommendations. There's still a lot of work that could be done to improve recommendations:
&lt;ul&gt;
&lt;li&gt;Using past recommendations to influence future recommendations.&lt;/li&gt;
&lt;li&gt;Adjusting the metric used to pick who to recommend.&lt;/li&gt;
&lt;li&gt;More advanced filters to differentiate business, spam, and friendship conversations.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Adjusting the frequency of recommendations. It's currently hardcoded to one week per email.&lt;/li&gt;
&lt;li&gt;Better-looking recommendation emails.&lt;/li&gt;
&lt;li&gt;Suggest topics of conversation. We could pick topics randomly, or we could try to analyze past emails, perhaps.&lt;/li&gt;
&lt;li&gt;Handle people with multiple email addresses. Currently, the application keys off of email
addresses alone, so it can suggest someone whom you might be corresponding with regularly
if you are doing so with a different email address.&lt;/li&gt;
&lt;/ul&gt;
</content></entry><entry><title>ttyrec conversion</title><link href="http://swenson.io/2018_01_14_ttyrec_conversion.html" rel="alternate" /><id>2018_01_14_ttyrec_conversion.html</id><published>2018-01-14T08:00:00-00:00</published><updated>2018-01-14T08:00:00-00:00</updated><author><name>Christopher Swenson</name></author><summary type="html">
&lt;p&gt;I'm an armchair fan of &lt;a href="http://www.nethack.org"&gt;NetHack&lt;/a&gt; and other roguelikes, though</summary><content type="html">
&lt;p&gt;I'm an armchair fan of &lt;a href="http://www.nethack.org"&gt;NetHack&lt;/a&gt; and other roguelikes, though I don't play them too much.
I've always wondered why there wasn't, say, a NetHack screensaver that would just play through the game, since it seemed to be ripe for screensavering.&lt;/p&gt;

&lt;p&gt;I'd found some pieces of tools that might do the job around the Internet: &lt;a href="http://nethack.wikia.com/wiki/Notable_ascensions"&gt;TTY "recordings" of NetHack ascensions&lt;/a&gt; (essentially, replaying through the terminal sequences while they are playing), &lt;a href="https://github.com/selectel/pyte"&gt;pyte&lt;/a&gt; (a Python terminal emulator), and &lt;a href="https://pypi.python.org/pypi/images2gif"&gt;images2gif&lt;/a&gt; (a mostly working animated GIF maker).&lt;/p&gt;

&lt;p&gt;It's &lt;em&gt;almost&lt;/em&gt; there, so I wrote the missing piece that takes the screen buffer (as a matrix of character codes) and converts it to an image using an &lt;a href="http://en.wikipedia.org/wiki/Code_page_437#mediaviewer/File:Codepage-437.png"&gt;old  DOS bitmap font&lt;/a&gt;, and then all of the glue code to make it all work together.
I sped up the results by 5&amp;times; or so, and then run the whole thing through ImageMagick in the end to shrink the animated GIF.&lt;/p&gt;

&lt;p&gt;I open sourced the whole thing as &lt;a href="https://github.com/swenson/ttyrec2gif"&gt;ttyrec2gif&lt;/a&gt;. It produces nice GIFs like:&lt;/p&gt;

&lt;p&gt;&lt;img src="images/out00001.gif" alt="Sample nethack screensaver animated GIF" /&gt;&lt;/p&gt;

&lt;p&gt;There's one last piece: how to actually turn this into a screen saver.&lt;/p&gt;

&lt;p&gt;In OS X, it's a matter of writing a little Quartz Composer program to randomly pick GIFs from a directory and play them as movies. This has hard-coded paths in it, because I haven't figured out how to make OS X screen saver configuration parameters, so I'll just post a screen shot of what the program looks like:&lt;/p&gt;

&lt;p&gt;&lt;img src="images/nethack-screensaver_-_Editor_2014-10-19_11-38-46.png" alt="Quartz Composer screenshot of my screensaver app."/&gt;&lt;/p&gt;

&lt;p&gt;(Having Quartz pick a random GIF and then reload and pick another one after 5 minutes is a fun challenge. The best solution I came up with involved using a wave generator that, when rounded, would trigger an event only when it reached its apex, and this triggered a sampler to resample and pick a new random GIF. Kind of a Rube Goldberg way of doing it, but it was fun.)&lt;/p&gt;

&lt;p&gt;Anyway, at the very least, there are some cool GIFs out there to look at now.
I'm considering doing a big run and converting a more runs into GIFs, but it's very time-consuming (it takes many hours to convert a game to an animated GIF for now).&lt;/p&gt;
</content></entry><entry><title>An simple AES-based random number generator</title><link href="http://swenson.io/2015_04_26_an_simple_aesbased_random_number_generator.html" rel="alternate" /><id>2015_04_26_an_simple_aesbased_random_number_generator.html</id><published>2015-04-27T00:43:28-00:00</published><updated>2015-04-27T00:43:28-00:00</updated><author><name>Christopher Swenson</name></author><summary type="html">
&lt;p&gt;When browsing through some stack traces doing Go development, I noticed that Go had done somethi</summary><content type="html">
&lt;p&gt;When browsing through some stack traces doing Go development, I noticed that Go had done something rather
clever in their codebase: on x86-64 processors, they used
&lt;a href="http://en.wikipedia.org/wiki/AES_instruction_set"&gt;the AES instruction set&lt;/a&gt;
&lt;a href="https://github.com/golang/go/blob/7a4a64e8f3dc14717695e53c7560992789f8bc9e/src/runtime/asm_amd64.s#L874"&gt;to build a hash function&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The more I've thought about it, the more this is potentially quite brilliant.
AES, the block cipher, compounds multiple rounds of mixing data together, shuffling bits around, and
transforming it.
For the past several years, all Intel and AMD processors have supported doing an AES round in
a single instruction.&lt;/p&gt;

&lt;p&gt;Hashing and random number generation use the same sort of principles as AES is based on: basically,
shuffle bits around and transform them.
AES gets cryptographic strength by doing this many times in a row (usually 10+).&lt;/p&gt;

&lt;p&gt;However, if we are building a &lt;a href="http://en.wikipedia.org/wiki/Hash_table"&gt;hash table&lt;/a&gt; or generating random numbers for simulations (or other non-cryptographic uses), then we don't need the full cryptographic strength of AES.
But, we can still leverage the AES instruction set to build some fast random number generators and hashes.&lt;/p&gt;

&lt;p&gt;For starters, I've gone ahead and written &lt;a href="https://github.com/swenson/aesrng"&gt;an AES-based random number generator&lt;/a&gt; that performs a single round of AES as its core, and iterates to produce more random numbers.&lt;/p&gt;

&lt;p&gt;In practice, it is about twice as fast as the &lt;a href="http://en.wikipedia.org/wiki/Mersenne_twister"&gt;Mersenne Twister&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I think that the biggest reason that most people haven't done this is that it's a relatively new feature, and
doing CPUID detection to make sure that the AES instruction set is available at runtime is kind of annoying.
At the very least, this library has those pieces already written.&lt;/p&gt;

&lt;p&gt;Some caveats:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The quality of random numbers produced is not as high as the mersenne twister (they don't &lt;em&gt;quite&lt;/em&gt; pass the &lt;a href="http://www.phy.duke.edu/~rgb/General/dieharder.php"&gt;dieharder&lt;/a&gt; test suite).
They're not terrible either; they're just not as good.&lt;/li&gt;
&lt;li&gt;This only works on relatively modern x86-64 processors.
To detect support, you can use the included &lt;code&gt;cpuid.h&lt;/code&gt; to call &lt;code&gt;intel_has_feature(INTEL_FEATURE_AES)&lt;/code&gt;
to see if the &lt;code&gt;CPUID&lt;/code&gt; instruction indicates support for the AES instruction set.&lt;/li&gt;
&lt;li&gt;It's very probably that more performance or better numbers could be created.
I used a fairly straightforward seed and random number generator.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I've also been experimenting with an AES-based hash function that is extremely similar to this.
There is an equivalent test set to the Diehard tests for hash functions, called &lt;a href="https://code.google.com/p/smhasher/"&gt;SMHasher&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Unfortunately, my preliminary results are not encouraging: AES instructions are possibly slower
than the Murmur3 algorithm when tuned to pass the SMHasher tests.
With only 1 or 2 rounds of encryption used, my AES hash function does not seem to pass the
SMHasher suite, though it does after 3 or 4 rounds.
Unfortunately, these extra rounds make the performance not quite as competitive.&lt;/p&gt;

&lt;p&gt;I'm still tinkering with the AES-based hash function though to try to make it faster
or hash better. I'll report back with my findings.&lt;/p&gt;
</content></entry><entry><title>So You Want To Learn Crypto, Part 2: Cyclic Groups And Short Codes</title><link href="http://swenson.io/2014_11_30_so_you_want_to_learn_crypto_part_2_cyclic_groups_and_short_codes.html" rel="alternate" /><id>2014_11_30_so_you_want_to_learn_crypto_part_2_cyclic_groups_and_short_codes.html</id><published>2014-11-30T20:59:02-00:00</published><updated>2014-11-30T20:59:02-00:00</updated><author><name>Christopher Swenson</name></author><summary type="html">
&lt;p&gt;&lt;a href="http://www.caswenson.com/2014_11_06_so_you_want_to_learn_crypto_part_1"&gt;Part 1 is here&lt;</summary><content type="html">
&lt;p&gt;&lt;a href="http://www.caswenson.com/2014_11_06_so_you_want_to_learn_crypto_part_1"&gt;Part 1 is here&lt;/a&gt;&lt;/p&gt;

&lt;h2&gt;Modular arithmetic&lt;/h2&gt;

&lt;p&gt;When I first started tinkering with crypto, one thing I was confused about was modular arithmetic.
It's applications to crypto are everywhere: AES is based in part on finite field
arithmetic, for example.
However, modular arithmetic acts a little strange if you aren't used to it.
I've seen this topic confuse just about everyone at some point, so I thought
I would explore modular arithmetic a little, and show a fun application of it for generating shortened URLs (or short codes).&lt;/p&gt;

&lt;p&gt;To start, you can think of modular arithmetic simply as: every time you do a numerical operation, like adding, subtracting, or multiplying two integers,
you also take the modulus with respect to some other number.
Like, we know that $1 + 10 = 11$, but if we are doing arithmetic modulo
$6$, then $1 + 10 \equiv 5$ (because $11 \div 6 = 1$ with remainder $5$).
We use $\equiv$ to mean "equals modulo something" or "is congruent modulo something".&lt;/p&gt;

&lt;p&gt;Addition, subtraction, and multiplication are easy: just add, subtract, or multiply the numbers like normal, then divide by the modulus and take the remainder.&lt;/p&gt;

&lt;p&gt;Some more examples modulo $6$: $2 + 5 \equiv 1$, $2 \cdot 5 \equiv 4$, $2 - 5 \equiv -3 \equiv 3$.&lt;/p&gt;

&lt;p&gt;There in the last example we saw that $-3 \equiv 3$ modulo $6$.
In math, we often will use only the positive remainder (so, $3$), but
in some programming languages, negative remainders are allowed in some
cases (so you might see $-3$).
For the most part, that doesn't matter: all of the arithmetic will
still work as expected.&lt;/p&gt;

&lt;h2&gt;Division, or, multiplicative inverses&lt;/h2&gt;

&lt;p&gt;Addition has its opposite, subtraction, that works by default.
Multiplication also works, but its opposite, division, isn't &lt;em&gt;guaranteed&lt;/em&gt; to work.&lt;/p&gt;

&lt;p&gt;For example, we might want to know, can we divide by 2?
Division is really multiplying by the inverse, so what is the inverse of 2?
Looking, again, modulo 6:&lt;/p&gt;

&lt;p&gt;$$2 \cdot 1 \equiv 2$$
$$2 \cdot 2 \equiv 4$$
$$2 \cdot 3 \equiv 0$$
$$2 \cdot 4 \equiv 2$$
$$2 \cdot 5 \equiv 4$$&lt;/p&gt;

&lt;p&gt;So, $2$ has no inverse modulo $6$, because nothing, when multiplied by $2$, is equal to $1$.
And if we try to divide by $2$ modulo $6$, it fails: $4 \div 2$ is still $2$, but what is $3 \div 2$? Normally, we'd just say $3/2$ or $1.5$, but we don't
have fractions or decimal points here: all we have is the integers $0--5$, and
&lt;em&gt;none&lt;/em&gt; of them, when multiplied by $2$, is equal to $3$.&lt;/p&gt;

&lt;p&gt;But, sometimes we have multiplicative inverses.
Modulo $6$, $5$ has a multiplicative inverse: it's also $5$.
This means that dividing by $5$ is the same as multiplying by it.&lt;/p&gt;

&lt;p&gt;$$2 \cdot 5 \equiv 10$$
$$2 \div 5 \equiv 2 \cdot 5 \equiv 10$$&lt;/p&gt;

&lt;h2&gt;Cyclic groups&lt;/h2&gt;

&lt;p&gt;Okay, so, division sometimes works. When?&lt;/p&gt;

&lt;p&gt;Well, simply put, division is guaranteed to work, in that we will be able to find
a multiplicative inverse, if we are working modulo a prime or a prime power, e.g., modulo $7$ or $7^2 = 49$.
When we have such a case, we call the set of numbers modulo the prime (or prime
power) a &lt;em&gt;finite field&lt;/em&gt;.
I won't go into the nitty gritty details on the terminology, but essentially,
a &lt;em&gt;field&lt;/em&gt; is what we get when division works.
Sometimes, we call the numbers (modulo our modulus), except $0$, the
multiplicative group, or the cyclic group.&lt;/p&gt;

&lt;p&gt;Why cyclic?
Well, when we are working modulo, say, a prime $p$, then we can
generate at least part of the group with another prime, $g &amp;lt; p$,
by multiplying $g$ by itself a bunch of times.&lt;/p&gt;

&lt;p&gt;For example, modulo $11$, with $g = 2$:&lt;/p&gt;

&lt;p&gt;$$g \equiv 2$$
$$g^2 \equiv 2 \cdot 2 \equiv 4$$
$$g^3 \equiv 4 \cdot 2 \equiv 8$$
$$g^4 \equiv 8 \cdot 2 \equiv 16 \equiv 5$$
$$g^5 \equiv 5 \cdot 2 \equiv 10$$
$$g^6 \equiv 10 \cdot 2 \equiv 20 \equiv 9$$
$$g^7 \equiv 9 \cdot 2 \equiv 18 \equiv 7$$
$$g^8 \equiv 7 \cdot 2 \equiv 14 \equiv 3$$
$$g^9 \equiv 3 \cdot 2 \equiv 6$$
$$g^{10} \equiv 6 \cdot 2 \equiv 12 \equiv 1$$
$$g^{11} \equiv 1 \cdot 2 \equiv 2$$
and we've looped back around.
Hence the term &lt;em&gt;cyclic&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Modulo $11$, we generated the whole multiplicative group (of size $10$).
However, we won't necessarily always generate the entire group: sometimes
we get a subgroup instead.
For example, look at $g = 2, p = 7$:&lt;/p&gt;

&lt;p&gt;$$g \equiv 2$$
$$g^2 \equiv 2 \cdot 2 \equiv 4$$
$$g^3 \equiv 4 \cdot 2 \equiv 8 \equiv 1$$
$$g^4 \equiv 1 \equiv 2 \equiv 2$$
and we've looped after only $3$ elements.&lt;/p&gt;

&lt;p&gt;In general, for a multiplicative group defined by $q$ of size $q - 1$, then
any element will generate a subgroup that &lt;em&gt;divides&lt;/em&gt; $q - 1$.
So, for $7 - 1 = 6 = 2 \cdot 3$, so an element could generate
subgroups of size $1$, $2$, $3$, or $6$.&lt;/p&gt;

&lt;h2&gt;Crypto&lt;/h2&gt;

&lt;p&gt;So, where's the crypto?&lt;/p&gt;

&lt;p&gt;Well, first off, we might have noticed that the operation $g^x$ seems
to have this "scrambling" effect: the numbers that you get out
are kind of random.&lt;/p&gt;

&lt;p&gt;In fact, they're very random for large moduli $q$.
In general, it's believed to be quite hard, given $g$, $q$, and
$g^x$ (modulo $q$) to figure out $x$.
This is called the &lt;em&gt;discrete logarithm&lt;/em&gt; problem,
and the fact that it is believed to be difficult means
that people have used its difficulty as the foundation
behind crypto, such as, especially:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange"&gt;Diffie&amp;ndash;Hellman&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;the &lt;a href="http://en.wikipedia.org/wiki/Digital_Signature_Algorithm"&gt;Digital Signature Algorithm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://en.wikipedia.org/wiki/ElGamal_encryption"&gt;ElGamal&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;How large is "large"?
Large $q$ generally means hundreds or thousands of bits in size.&lt;/p&gt;

&lt;p&gt;We'll come back to this bit in a bit, but the important part to note here is that, in general, inverting the exponentiation, or, taking the discrete logarithm,
is hard.&lt;/p&gt;

&lt;p&gt;Also, finite field arithmetic, in particular, division in a finite field,
plays a critical part in &lt;a href="http://en.wikipedia.org/wiki/Rijndael_S-box"&gt;AES&lt;/a&gt;.&lt;/p&gt;

&lt;h2&gt;Short codes&lt;/h2&gt;

&lt;p&gt;There's another useful thing we can use modular arithmetic and discrete logarithms for: a URL shortening scheme, like the URLs you see
starting with &lt;code&gt;g.co&lt;/code&gt;, &lt;code&gt;t.co&lt;/code&gt;, &lt;code&gt;bit.ly&lt;/code&gt;, etc.&lt;/p&gt;

&lt;p&gt;There are a few ways you might try to implement such a scheme.
First, we'll assume that you are just assigning each URL a number,
and then you'll use something like &lt;a href="http://en.wikipedia.org/wiki/Base32"&gt;Base32&lt;/a&gt; to convert the number (in binary) to a string.&lt;/p&gt;

&lt;p&gt;Then how do you assign the number?&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Just pick a random number and store it in a database, tied to the full URL.&lt;/li&gt;
&lt;li&gt;Hash the full URL, and use part of the hash as the number.&lt;/li&gt;
&lt;li&gt;Use a 1-up counter and tie it to the full URL.&lt;/li&gt;
&lt;li&gt;Use a 1-up counter, but try to &lt;em&gt;scramble&lt;/em&gt; it, for some definition of &lt;em&gt;scramble&lt;/em&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Option 1 is the simplest, and requires basically no math: just generate a random number and stick it in the database.
If there is a collision, try again.&lt;/p&gt;

&lt;p&gt;The downside is that, for very short codes, such as for a 5-character Base32 code, the numbers will all be $&amp;lt; 2^{25}$, and will be very likely to collide because of the &lt;a href="http://en.wikipedia.org/wiki/Birthday_problem"&gt;birthday paradox&lt;/a&gt;.
Lots of collisions means you have to try a bunch of times to insert into the
database successfully, and that means more round trips, more chances for weird
race conditions, and more chances for bugs.&lt;/p&gt;

&lt;p&gt;Option 2, hashing the full URL, has similar downsides for short hashes: collisions.
This case is even worse though, because you can't change the hash of the URL,
so any collisions are fatal, and mean you can't use that full URL.
So that option is not great.&lt;/p&gt;

&lt;p&gt;Option 3, using a 1-up counter in the database, is really easy:
just use a built-in 1-up counter, or assign a bunch of numbers to
individual servers to use, and have them request new batches of numbers
occasionally.
However, this leads to undesirable URLs, like
&lt;code&gt;http://short.url/AAAAC&lt;/code&gt;.
It allows users to guess what their URLs might be, and to start poking
around at other short URLs.&lt;/p&gt;

&lt;p&gt;Option 4 is a compromise: we want the simplicity of the 1-up counter,
but we don't want users to be able to easily and meaningfully guess the short
URLs.
We just need a scrambling function.&lt;/p&gt;

&lt;h2&gt;Scrambling a 1-up sequence&lt;/h2&gt;

&lt;p&gt;But what to choose?&lt;/p&gt;

&lt;p&gt;Well, again, we have some options.
Some thought might lead you to think: well, we could just add a constant to the number, or multiply by a constant.
However, this will be pretty obvious to users: they'd notice that consecutive
short URLs would always differ by constant amounts.&lt;/p&gt;

&lt;p&gt;Another line of thought: could we use the number in a random number generator
(say, as the seed), and just turn the crank and use the next number in the
sequence?
Yes, that's a great idea, as long as we're careful.
Specifically, we have to be careful about collisions.&lt;/p&gt;

&lt;p&gt;Two common random number generators that might fit the bill are
&lt;a href="http://en.wikipedia.org/wiki/Linear_feedback_shift_register"&gt;linear-feedback shift registers&lt;/a&gt; and
&lt;a href="http://en.wikipedia.org/wiki/Linear_congruential_generator"&gt;linear congruential generators&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;But, we might have a problem: we might need to "unscramble" the numbers,
to tell if they might be in the database.
We might just store the scrambled versions next to the 1-up counter, but
that would require extra storage, and would probably require us to either
write complicated SQL or do an &lt;code&gt;UPDATE&lt;/code&gt;, and another database round-trip, to
set the scrambled number as well.
I don't like either of those options.&lt;/p&gt;

&lt;p&gt;So, how hard is it to unscramble those random number generators?
For linear-feedback shift registers, this is trying to count how many steps it took to get to the given output number, which is kind of difficult to do.
But, the same is true of linear congruential generators.&lt;/p&gt;

&lt;p&gt;Let's take a closer look at the linear congruential generator.
It works by, given an number $X_i$, generating the next number by:&lt;/p&gt;

&lt;p&gt;$$X_ {i+1} = A \cdot X_i + C$$&lt;/p&gt;

&lt;p&gt;If we assume $C = 0$ and $X_ 0 = 1$, we can compute $X_i = A^i$: this is exactly the same thing as exponentiation, which
is how we found cyclic groups.
So, to "scramble", all we need to do is exponentiate in our cyclic group.&lt;/p&gt;

&lt;p&gt;Oh, but wait, this sounds like bad news: we know that inverting exponentiation is the
discrete logarithm, which is hard in general.&lt;/p&gt;

&lt;p&gt;The keywords there are "in general".
Can we make pick cyclic groups where it is easy?&lt;/p&gt;

&lt;p&gt;Yes, we can.&lt;/p&gt;

&lt;h2&gt;Easy discrete logarithms&lt;/h2&gt;

&lt;p&gt;If we are working in a cyclic group modulo $p$, a prime, and if
$p - 1$ is the product of a bunch of small primes or prime powers, then
computing discrete logarithms is easy.
To compute discrete logarithms in that case, we can use the
&lt;a href="http://en.wikipedia.org/wiki/Pohlig%E2%80%93Hellman_algorithm"&gt;Pohlig&amp;ndash;Hellman algorithm&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The Pohlig&amp;ndash;Hellman algorithm works by taking advantage of
short cycles in the cyclic group: essentially, we can piece together the
"full" discrete logarithm by computing a bunch of "small" discrete logarithms,
and using the &lt;a href="http://en.wikipedia.org/wiki/Chinese_remainder_theorem"&gt;Chinese remainder theorem&lt;/a&gt;
to stitch them back together.
Each of these "small" discrete logarithms are in subgroups defined by
the factors of $p - 1$: so a bunch of small factors of $p - 1$ means
a bunch of small discrete logarithms to do.
If the factors are all very small, then we can just precompute
all factors in the small subgroups.&lt;/p&gt;

&lt;h2&gt;Putting it all together&lt;/h2&gt;

&lt;p&gt;Since we want roughly five-character codes, we need to find a large 25-bit
prime with which to make our cyclic group.
Specifically, we want a prime $p$ such that $p - 1$ is all tiny factors.
To make the math easier, it would be nice if $p - 1$ has no repeated
factors (that is, no prime powers).&lt;/p&gt;

&lt;p&gt;In &lt;a href="http://www.sagemath.org"&gt;Sage&lt;/a&gt; (a Python-based mathematics environment),
we can find such a prime with this code:&lt;/p&gt;

&lt;pre&gt;
smoothest = 2^30 # just something large
for p in primes(2^24, 2^25):
  smoothness = 0
  for f, e in (p - 1).factor():
    if e != 1:
        smoothness = 2^30
        break
    smoothness += f
  if smoothness &lt; smoothest:
    smooth = p
    smoothest = smoothness
print smooth, smooth - 1, (smooth - 1).factor()
&lt;/pre&gt;

&lt;p&gt;If we run this snippet, we find the best prime is $17160991$.
We can confirm that
$17160991 - 1 = 17160990 = 2 \cdot 3 \cdot 5 \cdot 7 \cdot 11 \cdot 17 \cdot 19 \cdot 23$.&lt;/p&gt;

&lt;p&gt;This means that we can compute logarithms modulo $17160991$ by pre-computing
and storing just $87$ numbers (the sum of the factors of $p - 1$)
using Pohlig&amp;ndash;Hellman.&lt;/p&gt;

&lt;p&gt;We also need to pick a base $g$, that is, the number we are exponentiating
in our cyclic group.
We basically need a number that generates the entire multiplicative group.
We can use Sage again to find such a number:&lt;/p&gt;

&lt;pre&gt;
for q in primes(3, 1000):
  if GF(modulus)(q).multiplicative_order() == modulus - 1:
    print q
    break
&lt;/pre&gt;

&lt;p&gt;In this case, we find that $61$ is the smallest prime that generates
the full multiplicative group, so it will be our base.&lt;/p&gt;

&lt;p&gt;So, our procedure so far to scramble an integer $x$ looks like:&lt;/p&gt;

&lt;p&gt;$$61^x\ (\text{mod}\ 17160991)$$&lt;/p&gt;

&lt;p&gt;However, there is one tiny problem here: for $x = 0$, we get $1$, and for
$x = 1$, we get $61$, and for $x = 2$, we get $3721$.
These values stick out a bit (they're all small and easily recognized).
To hide them, we can just add some small number to $x$, like 30, giving us&lt;/p&gt;

&lt;p&gt;$$61^{x + 30}\ (\text{mod}\ 17160991)$$&lt;/p&gt;

&lt;p&gt;So, for $x = 0$, we have $4244504$ and $x = 1$ gives us $1499879$.&lt;/p&gt;

&lt;p&gt;If we want to invert a short code, we'll need to unscramble a number $y$ to find the unscrambled number, that is, to find $x$ in&lt;/p&gt;

&lt;p&gt;$$y \equiv 61^{x+30}\ (\text{mod}\ 17160991)$$&lt;/p&gt;

&lt;p&gt;In the first of the two examples above, we would be trying to solve:&lt;/p&gt;

&lt;p&gt;$$4244504 \equiv 61^{x+30}\ (\text{mod}\ 17160991)$$&lt;/p&gt;

&lt;p&gt;Using the Pohlig&amp;ndash;Hellman algorithm, we can easily compute (with a
few modular exponentiations) the discrete logarithm of $4244504$ is $30$, which means that $x = 0$.&lt;/p&gt;

&lt;h2&gt;Some code&lt;/h2&gt;

&lt;p&gt;I've released code for the above computations, including the
Pohlig&amp;ndash;Hellman algorithm implementation, in Python on
&lt;a href="https://github.com/swenson/shortcodes"&gt;GitHub&lt;/a&gt;, licensed under MIT.&lt;/p&gt;
</content></entry><entry><title>How to pronounce programming words</title><link href="http://swenson.io/2014_11_10_how_to_pronounce_programming_words.html" rel="alternate" /><id>2014_11_10_how_to_pronounce_programming_words.html</id><published>2014-11-10T16:51:59-00:00</published><updated>2014-11-10T16:51:59-00:00</updated><author><name>Christopher Swenson</name></author><summary type="html">
&lt;p&gt;Certain words in programming I've seen people mangle in various ways, and
many times, I realized</summary><content type="html">
&lt;p&gt;Certain words in programming I've seen people mangle in various ways, and
many times, I realized that I don't actually know the correct way to pronounce them.&lt;/p&gt;

&lt;p&gt;So, I've constructed a list of what I consider to be the correct pronounciations
of various words.
I've tried to use the original authors of as the source, when possible, or other authoritative sources.&lt;/p&gt;

&lt;p&gt;In alphabetical order:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Akka&lt;/em&gt;: ahh kahh, &lt;a href="https://www.youtube.com/watch?v=GBvtE61Wrto"&gt;https://www.youtube.com/watch?v=GBvtE61Wrto&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Clique&lt;/em&gt;: click, &lt;a href="https://www.youtube.com/watch?v=txaGsawljjA"&gt;https://www.youtube.com/watch?v=txaGsawljjA&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;GIF&lt;/em&gt;: jif, sorry, &lt;a href="http://www.olsenhome.com/gif/"&gt;http://www.olsenhome.com/gif/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;GNU&lt;/em&gt;: guh-new, &lt;a href="http://upload.wikimedia.org/wikipedia/commons/2/24/En-gnu.ogg"&gt;http://upload.wikimedia.org/wikipedia/commons/2/24/En-gnu.ogg&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Godel&lt;/em&gt;: gurr-dle, &lt;a href="http://upload.wikimedia.org/wikipedia/commons/f/fd/Kurt_g%C3%B6del.ogg"&gt;http://upload.wikimedia.org/wikipedia/commons/f/fd/Kurt_g%C3%B6del.ogg&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Knuth&lt;/em&gt;: kuh-nooth, &lt;a href="http://cs.stanford.edu/~uno/faq.html"&gt;http://cs.stanford.edu/~uno/faq.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;LaTeX&lt;/em&gt;: Leslie Lamport says there is no official pronunciation. Knuth pronounces it lah-tech, &lt;a href="http://www.webofstories.com/play/donald.knuth/69;jsessionid=57A6533A825A17DE1474F30F5B254ADD"&gt;http://www.webofstories.com/play/donald.knuth/69;jsessionid=57A6533A825A17DE1474F30F5B254ADD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Linux&lt;/em&gt;: Lih-nucks, &lt;a href="https://www.youtube.com/watch?v=uK0xXFZtJ8Q"&gt;https://www.youtube.com/watch?v=uK0xXFZtJ8Q&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;MySQL&lt;/em&gt;: my-ess-que-ell, &lt;a href="https://www.youtube.com/watch?v=nalzRhtn-vw"&gt;https://www.youtube.com/watch?v=nalzRhtn-vw&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;NumPy&lt;/em&gt;: num-pie, &lt;a href="https://www.youtube.com/watch?v=vrPRwUOt-7k"&gt;https://www.youtube.com/watch?v=vrPRwUOt-7k&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;OS X&lt;/em&gt;: oh-ess-Ten, &lt;a href="https://www.youtube.com/watch?v=WcZqJHH3Gkc"&gt;https://www.youtube.com/watch?v=WcZqJHH3Gkc&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;PyPI&lt;/em&gt;: pie pee eye, &lt;a href="http://www.quora.com/How-do-Pythonistas-pronounce-PyPy-and-PyPI"&gt;http://www.quora.com/How-do-Pythonistas-pronounce-PyPy-and-PyPI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Qt&lt;/em&gt;: cute, &lt;a href="https://www.youtube.com/watch?v=2hE-Oo4ltJg"&gt;https://www.youtube.com/watch?v=2hE-Oo4ltJg&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Scala&lt;/em&gt;: scah-lah, rhymes with challah, &lt;a href="https://www.youtube.com/watch?v=ecekSCX3B4Q"&gt;https://www.youtube.com/watch?v=ecekSCX3B4Q&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;SQL&lt;/em&gt;: ess-que-ell (since Sequel is the predecessor), &lt;a href="https://www.youtube.com/watch?v=BvmMGHtqY6Q"&gt;https://www.youtube.com/watch?v=BvmMGHtqY6Q&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;TeX&lt;/em&gt;: tech. &lt;a href="https://www.youtube.com/watch?v=C3vILM2cNuo"&gt;https://www.youtube.com/watch?v=C3vILM2cNuo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Trie&lt;/em&gt;: tree, &lt;a href="http://www.webcitation.org/5pqUULy24"&gt;http://www.webcitation.org/5pqUULy24&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;von Neumann&lt;/em&gt;: von noi-man &lt;a href="https://www.youtube.com/watch?v=VTS9O0CoVng"&gt;https://www.youtube.com/watch?v=VTS9O0CoVng&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content></entry><entry><title>So You Want To Learn Crypto, Part 1</title><link href="http://swenson.io/2014_11_06_so_you_want_to_learn_crypto_part_1.html" rel="alternate" /><id>2014_11_06_so_you_want_to_learn_crypto_part_1.html</id><published>2014-11-06T20:32:27-00:00</published><updated>2014-11-06T20:32:27-00:00</updated><author><name>Christopher Swenson</name></author><summary type="html">
&lt;p&gt;Cryptography and cryptanalysis are topics that fascinate many people, but it's a tricky area to </summary><content type="html">
&lt;p&gt;Cryptography and cryptanalysis are topics that fascinate many people, but it's a tricky area to get into.
For instance, knowing the difference between a &lt;a href="http://en.wikipedia.org/wiki/Hash_function"&gt;hash function&lt;/a&gt; and a &lt;a href="http://en.wikipedia.org/wiki/Cryptographic_hash_function"&gt;cryptographically strong hash function&lt;/a&gt; is critical, but extremely easy to mix up due to confusing terminology.
In general, there's heavy jargon that takes serious studying to get a grasp on.&lt;/p&gt;

&lt;p&gt;Cryptography is also almost entirely a self-taught discipline: even today, there are few college and graduate courses on cryptography, and most of those only cover the basics. (Indeed, this is why I wrote my book on cryptanalysis: I wanted to teach a class on the topic, and there was no suitable text, so I wrote my own.)
This means that it is reasonable, even necessary, to learn a great deal of crypto on your own.&lt;/p&gt;

&lt;p&gt;With that in mind, I'm going list a few resources, recommendations, and maybe even explain a little bit myself to help get you started.&lt;/p&gt;

&lt;h2&gt;Some resources to get you started&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://twitter.com/lvh"&gt;lvh&lt;/a&gt; has a video from PyCon 2013 called &lt;a href="http://pyvideo.org/video/1778/crypto-101"&gt;Crypto 101&lt;/a&gt;.
I'm not the biggest fan of this video, as it goes through too much material in too short an amount of time, but it does give you a quick look at many different areas of cryptography.
Since it does cover so much, don't worry if not everything clicks.
Instead, I'd pick something that interests you, like hash functions or AES, and dive further into that one topic.
If you try to tackle too many subjects at once, it might be overwhelming.&lt;/li&gt;
&lt;li&gt;Once you've figured out some areas you actually like, you can start digging in in that particular field.&lt;/li&gt;
&lt;li&gt;There are some great books on cryptography that you'll probably want to read eventually, so I'll go ahead and list some of them here:
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.amazon.com/gp/product/047013593X/ref=as_li_tl?ie=UTF8&amp;amp;camp=1789&amp;amp;creative=390957&amp;amp;creativeASIN=047013593X&amp;amp;linkCode=as2&amp;amp;tag=mathfigu-20&amp;amp;linkId=T5SNSQXDSP6LHEER"&gt;Modern Cryptanlysis&lt;/a&gt; by Christopher Swenson. Obviously, I'm a bit biased here, but I wrote some decent introduction sections to many areas of cryptography and cryptanalysis with lots of examples in Python, and there are far worse places to start. I focus primarily on block ciphers (like AES) and public key cryptography (like RSA).&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.amazon.com/gp/product/0471117099/ref=as_li_tl?ie=UTF8&amp;amp;camp=1789&amp;amp;creative=390957&amp;amp;creativeASIN=0471117099&amp;amp;linkCode=as2&amp;amp;tag=mathfigu-20&amp;amp;linkId=CBNLGUN6PZETLFCV"&gt;Applied Cryptography&lt;/a&gt; by Bruce Schneier. Extremely dated, but still has some useful stuff. A lot of block and stream cipher stuff.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.amazon.com/gp/product/0471223573/ref=as_li_tl?ie=UTF8&amp;amp;camp=1789&amp;amp;creative=390957&amp;amp;creativeASIN=0471223573&amp;amp;linkCode=as2&amp;amp;tag=mathfigu-20&amp;amp;linkId=6ZT4U6PDRCMS4V3V"&gt;Practical Cryptography&lt;/a&gt; by Bruce Schneier. A good companion to Applied Cryptography that is a bit more updated, with lots of focus on understanding and correctly using cryptography.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.amazon.com/gp/product/1420070029/ref=as_li_tl?ie=UTF8&amp;amp;camp=1789&amp;amp;creative=390957&amp;amp;creativeASIN=1420070029&amp;amp;linkCode=as2&amp;amp;tag=mathfigu-20&amp;amp;linkId=CNJQJOUTTRFOKRBH"&gt;Algorithmic Cryptanalysis&lt;/a&gt; by Antoine Joux. One of the newest books, and chock full of good stuff, with a focus on public key cryptography, stream ciphers, and lattices. This one's probably one of the most advanced cryptography books on the market.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://cacr.uwaterloo.ca/hac/"&gt;Handbook for Applied Cryptography&lt;/a&gt; by Alfred Menezes, Paul van Oorschot and Scott Vanstone. This book covers a lot of material, but I find it a little terse at times. It is free though, which is a big plus.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This list is not comprehensive: it's probably best to just look at all of the available books, glance through some of the pages and the table of contents, and see if the style, approach, and depth meet your interests. In general, there are two kinds of crypto books you'll see on the market: academic ones and practical ones. When you start out learning, you'll definitely want to focus on the more practical tomes (Schneier and Swenson, for example), and start reading academic books (Joux's book, and many published by academic publishers like Springer) as you get more comfortable.&lt;/p&gt;

&lt;h2&gt;I know the basics, what next?&lt;/h2&gt;

&lt;p&gt;Once you know Crypto 101 and you want to dive into Crypto 201, where do you go?&lt;/p&gt;

&lt;p&gt;One great next step is to work on &lt;a href="http://cryptopals.com/"&gt;The Matasano Crypto Challenges&lt;/a&gt;.
Not only will you have to learn a lot to complete them, but you'll have real experience making and breaking codes.
I think this is a great next-step for a would-be crypto enthusiast.
(And this is even a great step for cryptographers on any level &amp;ndash; I certainly had fun doing them.)&lt;/p&gt;

&lt;p&gt;There are some Coursera courses on Cryptography taught by Dan Boneh (&lt;a href="https://www.coursera.org/course/crypto"&gt;Cryptography I&lt;/a&gt; and &lt;a href="https://www.coursera.org/course/crypto2"&gt;Cryptography II&lt;/a&gt;).
I haven't taken them, but the instructor is top-notch, and the syllabi are solid.&lt;/p&gt;

&lt;p&gt;As you progress further in your knowledge, you should start reading recent research papers in cryptography.
One great place to keep track of is the IACR &lt;a href="http://eprint.iacr.org/"&gt;Cryptology ePrint Archive&lt;/a&gt;.
These are the cutting edge of cryptography and cryptanalysis, and they range from beginner-friendly to extremely deep, specialist literature.
The writing and publication quality of the cutting-edge papers also has a wide range.
And even though it is possible to learn almost everything about cryptography and cryptanalysis for free from these papers, the books in the previous section are often much easier to learn from since they have consistent writing style, terminology, notation, and editing.&lt;/p&gt;

&lt;h2&gt;This part confuses me. Help!&lt;/h2&gt;

&lt;p&gt;I'm going to have some more blog posts in the near future clearing up some areas that I've seen be particularly sticky for some people.
In particular, I know that there are some sticky points in finite fields, RSA, and hashing that I think I can help clarify.&lt;/p&gt;

&lt;p&gt;Check back next week for part 2 of &lt;em&gt;So You Want To Learn Crypto&lt;/em&gt;.&lt;/p&gt;
</content></entry><entry><title>What I Learned As A Teen Programmer</title><link href="http://swenson.io/2014_10_26_what_i_learned_as_a_teen_programmer.html" rel="alternate" /><id>2014_10_26_what_i_learned_as_a_teen_programmer.html</id><published>2014-10-27T01:38:42-00:00</published><updated>2014-10-27T01:38:42-00:00</updated><author><name>Christopher Swenson</name></author><summary type="html">
&lt;p&gt;I recently stumbled across the source to a NES emulator I wrote when I was a teenager.
Reading t</summary><content type="html">
&lt;p&gt;I recently stumbled across the source to a NES emulator I wrote when I was a teenager.
Reading through the source code, I thought a lot about how much I had grown as a developer and engineer since that long-forgotten summer.
For instance, I now understand things like (ha!) having a consistent style (some of my code was indented over 24 spaces so that it would be in the middle of the monitor), writing comments (there are basically no comments in this code), and tests (I didn't even know that testing was a thing).
But, I also realized that writing that emulator, and all of the development I did at the time, laid a strange foundation that colored how I've thought about programming since.&lt;/p&gt;

&lt;p&gt;Up to that point, I'd puttered around a little in BASIC and C, but I didn't fall in love with programming until I discovered assembly language.
Assembly was the first thing that really clicked for me: it was so simple, its semantics were so clear, and I found some great resources to help me learn (e.g., a nice tutorial I found on a BBS).
So, in my heart, assembly language is my first language.&lt;/p&gt;

&lt;p&gt;When I tell this to people now, they give me strange looks.
It's almost unfathomable to teach people assembly language first.
But, in doing so, I learned an awful lot about how software works, how computers work, and what foundation programming languages are built on top of.&lt;/p&gt;

&lt;p&gt;My masterpiece as a teen programmer was the NES emulator I wrote  entirely in x86 assembly language: almost exactly 10,000 lines of it.
This was my first taste of a real program: it was potentially useful, it had meaning, and it was a moderately large software project (my first).
Programming this was what made me dig deep and learn how to program.&lt;/p&gt;

&lt;p&gt;Here's some things that writing that emulator, and assembly language in general, taught me:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Data is just memory&lt;/strong&gt;. I remember trying to understand pointers in C and being incredibly frustrated with the strange syntax and the weird semantics. On the other hand, dealing with memory in assembly is so clearcut: memory is just a giant flat array (more or less), and pointers just point to stuff in that giant array. Indirect references, arrays of pointers, etc., make so much more sense when boiled down like this.&lt;/p&gt;

&lt;p&gt;Even today, when trying to visualize many problems, I think to myself: what does this look like in memory? What structures are being used and how are they laid out? This helps me understand how algorithms and data structures work together.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;How to write everything yourself.&lt;/strong&gt; There were some limited BIOS and DOS kernel calls, but for the most part, if I needed some capability, say, reading from a floppy drive or writing to the screen, I had to write it from scratch: calling I/O ports, reading and writing to RAM addresses, etc. If I wanted graphics, I had to draw every single pixel myself. These days, I know that this is just reinventing the wheel, something normally regarded as a bad habit; however, I also learned an awful lot about inventing wheels doing it.
I still have the bad habit of writing too many things myself, and not leveraging existing libraries as often as I should, so this lesson wasn't a complete victory.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Sometimes you just have to buckle down and program all of the tedious parts&lt;/strong&gt;. A big part of the NES emulator is writing a cycle-accurate CPU emulator. I'm sure that you can imagine how daunting it must be to start writing &lt;code&gt;CPU.ASM&lt;/code&gt; and have an empty jump table with 256 entries, knowing that you have to write all 256 functions to handle every single operation. Even worse, you have to get every single piece &lt;em&gt;exactly&lt;/em&gt; right.&lt;/p&gt;

&lt;p&gt;This taught me an extremely valuable skill: being able to focus on tedious, repetitive tasks.
Programming is absolutely chock-full of tedious programming that is absolutely necessary.
A great example is date and time functionality (especially time zones): incredibly important code to get correct, but so incredibly tedious and detail-oriented.
Being able to dive into thousands of pages of specifications and turn them into working libraries and APIs has paid great dividends in my career as a software engineer, and I first learned that here.
Being methodical and untiring is a great skill.&lt;/p&gt;

&lt;p&gt;And really, sometimes there is just no elegant solution. Often I see programmers strive to come up with a beautiful, simple, clean way to solve a problem, only to realize that the solution doesn't stand up to reality. Sometimes reality is &lt;em&gt;ugly&lt;/em&gt;, and sometimes you have to write &lt;em&gt;ugly&lt;/em&gt; code to solve it: you just need to program your way out of it.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Assembly is useful&lt;/strong&gt;. Learning assembly has come in handy countless times: reading GDB disassembly of my code for degugging, understanding and optimizing performance, writing compilers. Every time I see an assembly dump on a screen, it feels like home.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;You have to fail a lot to succeed&lt;/strong&gt;. When writing code as a teenager in assembly language, I spent a lot of time crashing my computer. I mean, assembly is really easy to get wrong.
When you get it wrong, you often do so catastrophically.&lt;/p&gt;

&lt;p&gt;But more so, in order to learn how to build things, you first have to learn to build them wrong, and learn to recognize your mistakes. And this code is just full of mistakes.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Overall, revisiting old code like this helped me reflect on my programming: where I've been, where I am, where I'm going.
I encourage everyone to save as much of their code as they ever write, and come back to it in a few years, and to reflect.&lt;/p&gt;
</content></entry><entry><title>Pyway or the highway</title><link href="http://swenson.io/2014_10_12_pyway_or_the_highway.html" rel="alternate" /><id>2014_10_12_pyway_or_the_highway.html</id><published>2014-10-12T19:15:24-00:00</published><updated>2014-10-12T19:15:24-00:00</updated><author><name>Christopher Swenson</name></author><summary type="html">
&lt;p&gt;&lt;a href="https://github.com/swenson/pyway"&gt;Pyway&lt;/a&gt; is a database migration tool that I wrote t</summary><content type="html">
&lt;p&gt;&lt;a href="https://github.com/swenson/pyway"&gt;Pyway&lt;/a&gt; is a database migration tool that I wrote to solve the problem of: I want database migrations, but I don't want to bring &lt;a href="http://guides.rubyonrails.org/migrations.html"&gt;Rails&lt;/a&gt; or the entire &lt;a href="http://flywaydb.org/"&gt;JVM&lt;/a&gt; with me just to do them.&lt;/p&gt;

&lt;p&gt;So, I wrote a little script that does the most simple thing you can do with database migrations: keep track of them by file name, and run any new ones in sorted order.
Python is pretty much universally present at this point in server environments, so that's the tool that I used.&lt;/p&gt;

&lt;p&gt;This is nothing sophisticated, and currently has &lt;code&gt;sqlite3&lt;/code&gt; hardcoded in it, but it should be trivial to modify for any other databases.
I didn't even use Python bindings for &lt;code&gt;sqlite3&lt;/code&gt;: I just called the command-line program to do the migrations.
That way, it should be easy to modify it for other databases in the near future.&lt;/p&gt;

&lt;p&gt;I'll probably end up adding Postgres or MySQL support sometime soon (when one of my projects that uses those technologies needs to be updated).&lt;/p&gt;
</content></entry><entry><title>This Holacracy Thing</title><link href="http://swenson.io/2014_10_05_this_holacracy_thing.html" rel="alternate" /><id>2014_10_05_this_holacracy_thing.html</id><published>2014-10-05T21:35:58-00:00</published><updated>2014-10-05T21:35:58-00:00</updated><author><name>Christopher Swenson</name></author><summary type="html">
&lt;p&gt;I've had a busy year where I've been trying out a lot of new ideas for working
and collaborating</summary><content type="html">
&lt;p&gt;I've had a busy year where I've been trying out a lot of new ideas for working
and collaborating, and learning a lot.
One thing that I learned about and experienced for a few weeks was the system of &lt;a href="http://en.wikipedia.org/wiki/Holacracy"&gt;Holacracy&lt;/a&gt;.
The goal of Holacracy is to have a managerless, self-organized team of people rather than having a traditional top-down management tree.
First, I'll state that my view of Holacracy comes after only about a month of working within it, and I don't feel that even after that I fully got it. So take this post with a grain of salt.&lt;/p&gt;

&lt;h2&gt;It's an AI for a boss&lt;/h2&gt;

&lt;p&gt;The initial appeal of Holacracy was that the group within the startup I was working at had no boss.
The Holacratic system has enough processes in place to theoretically allow decisions to be made without a central leader: a true peer-to-peer sort of system.&lt;/p&gt;

&lt;p&gt;Essentially, we had several Holacracy meetings a week.
These meetings were incredibly structure-heavy.
People would propose ideas at point A, discuss them at point B, and these discussions and round robins followed rules that theoretically ensured fairness.&lt;/p&gt;

&lt;p&gt;An insight I had to this was that &lt;em&gt;your team is controlling an NPC "boss"&lt;/em&gt;, and you have a little script that you run through to control its AI.&lt;/p&gt;

&lt;p&gt;This sounds like a good thing: if you have a very small team, maybe only a couple of people, it might seem like there would not be enough work for a full-time manager.
So you can have a cardboard cutout that you all pretend is your boss, and you have a system through which your cardboard captain makes decisions.
(I like to think of my cardboard cutout boss as Captain Picard.)&lt;/p&gt;

&lt;h2&gt;It's too complex&lt;/h2&gt;

&lt;p&gt;But, this AI is quite complex.
Holacracy has a lot of rules.
And I mean &lt;a href="http://holacracy.org/constitution"&gt;a lot&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;There was a discussion I had with someone at the startup where they indicated that Holacracy was probably impossible to understand (and certainly to get right) without hiring a special Holacracy consulting company to come in and help you adopt the system &amp;mdash; helping you go learn the rules and make your Captain Picard make decisions, basically.&lt;/p&gt;

&lt;p&gt;This kind of put me off.
A system that's so complex that it takes weeks of training to be able to even use it to have a constructive meeting?
It smells a bit fishy to me.
Meetings are hard, but they're not &lt;em&gt;that&lt;/em&gt; hard, even for a cave troll programmer like me.
There are entire consulting companies who would love to sell you tons of expensive training for Holacracy.&lt;/p&gt;

&lt;p&gt;To make it even worse, it's also nearly impossible to run with Holacracy without using special Holacracy meeting software to help you facilitate your meetings.
There's a lot of structure and rules, and the software helps enforce these rules.
This also smells a bit fishy.&lt;/p&gt;

&lt;p&gt;Being a newcomer to this incredibly confusing set of rules was also incredibly unpleasant.
I felt lost in a maze of rules.
I felt that I couldn't contribute to meetings because I didn't even know when I was allowed to talk.
And when I was allowed to talk, I often didn't know what to say.
(There are lots of magic words you use to indicate your status, and I sort of had to learn these
all from context.)
Given that I was on a feeler contract (before I came on full-time), I was not given any training in Holacracy.&lt;/p&gt;

&lt;p&gt;Finally, with such elaborate rules, there's inevitable rules-lawyering.
The rules are meant to be used as a weapon to combat inefficiency, but sometimes people get wrapped up
in them to the point that legitimate, necessary work was dropped on the floor because it did not
fit into the system well.
I felt that at times this did a disservice to the team, and certainly to the users of our software.&lt;/p&gt;

&lt;h2&gt;It's time-consuming&lt;/h2&gt;

&lt;p&gt;Given the AI manager and the complex rules, I think it's about a wash so far.
It's nice not to have a manager, but annoying to have a large RPG rules book to memorize before starting work.&lt;/p&gt;

&lt;p&gt;But, those meetings to make Captain Picard dance were &lt;em&gt;ridiculously time-consuming&lt;/em&gt;.
I'm of the leave-me-alone-so-I-can-code-in-my-cave School of Programming.
I can be coaxed out of my cave for the occasional meeting, and sometimes even enjoy it.
But the level of meetings required for the Captain Picard gears to run was debilitating.
Hours and hours each week were spent.
Several people had a significant amount of work before and after meetings dedicated to cleanup and prep work.
(And even during the meeting, a couple of people were often not allowed to participate in discussions, or supposed to limit such contributions significantly, as they played the role of facilitator, secretary, etc.)&lt;/p&gt;

&lt;h2&gt;In conclusion&lt;/h2&gt;

&lt;p&gt;Coming in as a new hire is daunting.
You are adjusting to a new team, learning their quirks, and learning their work.
When you add on a whole new system of thinking about meetings and management, and give no training (when a lot of training is required), you are setting people up to fail.
It certainly was just too much for me.
Holacracy was a huge contributor to my deciding not to work for this particular company long-term.&lt;/p&gt;

&lt;p&gt;The company that I worked with clearly prefers Holacracy, and that's their prerogative.
And if it works for them, that's great.
But, I didn't feel comfortable in that system, and &lt;a href="http://recode.net/2014/10/03/holacracy-or-hella-crazy-the-fringe-ideas-driving-the-las-vegas-downtown-project/"&gt;I don't think I'm the only one&lt;/a&gt;.
I don't expect to in the future, and I plan to avoid working for companies that embrace Holacracy.&lt;/p&gt;

&lt;p&gt;Or, you know, maybe Holacracy could be rebranded to use an actual Captain Picard cardboard cutout and a real RPG-like rulebook.
I might have had more fun then.&lt;/p&gt;
</content></entry>
</feed>
