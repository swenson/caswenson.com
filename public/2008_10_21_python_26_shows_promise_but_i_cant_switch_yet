
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>Python 2.6? Shows promise, but I can't switch yet &mdash; Christopher Swenson</title>
	<link href="main.css" rel="stylesheet" type="text/css" />
	<link href="feed" rel="alternate" title="Primary Feed" type="application/atom+xml" />
	<link href="SyntaxHighlighter.css" rel="stylesheet" type="text/css" />

<script src="js/shCore.js" type="text/javascript"></script>
<!--<script src="js/shBrushCSharp.js" type="text/javascript"></script>
<script src="js/shBrushCpp.js" type="text/javascript"></script>
<script src="js/shBrushCss.js" type="text/javascript"></script>
<script src="js/shBrushDelphi.js" type="text/javascript"></script>
<script src="js/shBrushJScript.js" type="text/javascript"></script>
<script src="js/shBrushJava.js" type="text/javascript"></script>
<script src="js/shBrushPhp.js" type="text/javascript"></script>-->
<script src="js/shBrushRuby.js" type="text/javascript"></script>
<script src="js/shBrushPython.js" type="text/javascript"></script>
<!--<script src="js/shBrushSql.js" type="text/javascript"></script>
<script src="js/shBrushVb.js" type="text/javascript"></script>
<script src="js/shBrushXml.js" type="text/javascript"></script>-->

<script language="javascript">
window.onload = function () {
    dp.SyntaxHighlighter.ClipboardSwf = '/flash/clipboard.swf';
    dp.SyntaxHighlighter.HighlightAll('code');
}
</script>

</head>
<body>
<div id="header">
	<div id="logo">
		<img src="images/chrisbluething.png" alt="blue thing" />
		<h1><a href="/">Christopher Swenson</a></h1>
		<p>Computer science, math, programming, and stuff.</p>
	</div>
</div>
<div id="content">
	<div class="postzoom"><h1><a href="2008_10_21_python_26_shows_promise_but_i_cant_switch_yet">Python 2.6? Shows promise, but I can't switch yet</a></h1>
<p>Python 2.6 was recently released, with 3.0 coming out soon.  Python 2.6 is meant to be sort of a stepping stone between the trusty old 2.x series and the hot, scary 3.0 series.  So, naturally, I downloaded 2.6 to play with.</p>

<p>One of the nicest features has to be true <a href="http://docs.python.org/library/multiprocessing.html#module-multiprocessing">multiprocessing support</a>, allowing you to have multiple processes going, all started from within the same program.  The Python docs even give a <a href="http://docs.python.org/whatsnew/2.6.html#pep-371-the-multiprocessing-package">short example</a> "demonstrating this", but it's probably the worst example ever.  For one thing, it crashes semi-regularly (Queue implementation problem?), and the <code>time.sleep()</code> in the inner loop makes no sense.</p>

<p>So, I had to write my own simple benchmarking program to see if there was much of a difference (adapted from their sample program):<pre name="code" class="python">from multiprocessing import Process</p>

<p>def factorial(N):
  fact = 1
  for i in range(1, N+1):
    fact = fact * i
  return fact</p>

<p>if <strong>name</strong> == '<strong>main</strong>':
  import sys
  if len(sys.argv) > 1 and (sys.argv[1] == "1" or sys.argv[1] == "2"):
      N = int(sys.argv[1])
  else:
    print "Expected argument: N (1 for single-threaded, 2 for double-threaded)"
    sys.exit(1)</p>

<p>numbers = range(15000, 15002)</p>

<p>if N == 1:
    factorial(numbers[0])
    factorial(numbers[1])
  else:
    processes = [Process(target=factorial, args=(i,)) for i in numbers]
    for p in processes:
      p.start()
    for p in processes:
      p.join()</pre>
I tested it on my Core Duo (2 × 32-bit cores) on my MacBook Pro, with a single process and two processes, with run times of approximately 0.98 and 0.58 seconds, respectively, for a speedup of about <strong>1.7×</strong>!  Not too shabby at all.  (Single process performance was nearly identical to that under Python 2.5, sadly.)</p>

<p>Normally, I'd be installing this on all of my systems, but, alas: <code>scipy</code> does not currently run under 2.6 (it breaks when compiling it).  So, for now, I cannot afford to switch to 2.6.</p>

<p>Fat chance that any of my standard packages will work with Python 3.0, too.</p>
</div>
	<div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/swenson/embed.js"></script><noscript><a href="http://swenson.disqus.com/?url=http://www.caswenson.com/2008_10_21_python_26_shows_promise_but_i_cant_switch_yet">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
	<div id="sidebar">
  <h2>Modern Cryptanalysis</h2>
	<div><br />
			<center><a href="http://www.amazon.com/gp/product/047013593X?ie=UTF8&tag=mathfigu-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=047013593X"><img border="0" src="images/21tcdykwdkl_aa_sl160_.jpg"></a><img src="http://www.assoc-amazon.com/e/ir?t=mathfigu-20&l=as2&o=1&a=047013593X" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></center>
	</div>
	<h2>Pages</h2>
		<ul>
	    <li><a href="about">About</a></li>
	    <li><a href="disclosures">Disclousres</a></li>
	    <li><a href="speaking">Speaking</a></li>
		  <li><a href="presentations">Presentations</a></li>
		  <li><a href="mcerrata"><em>Modern Cryptanalaysis</em> Errata</a></li>
		</ul>
	  <h2><a href="past">Archive</a></h2>
	</div>
	<div id="footer">
	<p id="legal">
	Content by Christopher Swenson (<a href="mailto:chris@caswenson.com">chris@caswenson.com</a>) |
	Design adapted from <a href="http://www.freecsstemplates.org/preview/replenish">Replenish</a>
	</p>
</div>
</body>
</html>
