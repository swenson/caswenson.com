
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>Christopher Swenson</title>
	<link href="main.css" rel="stylesheet" type="text/css" />
	<link href="feed" rel="alternate" title="Primary Feed" type="application/atom+xml" />
	<link href="SyntaxHighlighter.css" rel="stylesheet" type="text/css" />

<script src="js/shCore.js" type="text/javascript"></script>
<!--<script src="js/shBrushCSharp.js" type="text/javascript"></script>
<script src="js/shBrushCpp.js" type="text/javascript"></script>
<script src="js/shBrushCss.js" type="text/javascript"></script>
<script src="js/shBrushDelphi.js" type="text/javascript"></script>
<script src="js/shBrushJScript.js" type="text/javascript"></script>
<script src="js/shBrushJava.js" type="text/javascript"></script>
<script src="js/shBrushPhp.js" type="text/javascript"></script>-->
<script src="js/shBrushRuby.js" type="text/javascript"></script>
<script src="js/shBrushPython.js" type="text/javascript"></script>
<!--<script src="js/shBrushSql.js" type="text/javascript"></script>
<script src="js/shBrushVb.js" type="text/javascript"></script>
<script src="js/shBrushXml.js" type="text/javascript"></script>-->

<script language="javascript">
window.onload = function () {
    dp.SyntaxHighlighter.ClipboardSwf = '/flash/clipboard.swf';
    dp.SyntaxHighlighter.HighlightAll('code');
}
</script>

</head>
<body>
<div id="header">
	<div id="logo">
		<img src="images/chrisbluething.png" alt="blue thing" />
		<h1><a href="/">Christopher Swenson</a></h1>
		<p>Computer science, math, programming, and stuff.</p>
	</div>
</div>
<div id="content">
	<div class="postzoom"><h1><a href="2008_03_22_curl_twitter_crontab_happiness">curl + twitter + crontab = Happiness</a></h1>
<p>I've always wanted to know how my servers are doing.  I don't have time to check on every single one of them all of the time.  In the past, this meant perhaps an automatic email sent to me at some specified time during the day.</p>

<p>But emails are annoying.  RSS is definitely the technology that would be nice, but how to implement it?</p>

<p><a href="http://www.twitter.com/">Twitter</a> is ideal for this purpose.  Multiple people (admins?) can check the status of a server as it is updated, and you can lock it down so that only authorized people can view the status.</p>

<p>Updating is easy using the Twitter API through <a href="http://www.sakana.fr/blog/2007/03/18/scripting-twitter-with-curl/">curl</a>.  I just wrote the following bash script to update a twitter feed for a specified user:</p>

<pre lang="bash">#!/bin/bash

USER="server"
PASS="password"
URL="http://twitter.com/statuses/update.xml"
STATUS="[`hostname`] `uptime`, `df -h / | grep -o -e '[0-9][0-9]*%'` HD used"

curl --basic --user $USER:$PASS --data status="$STATUS" $URL</pre>

<p>This automatically sends updates that look like:</p>

<pre>[servname] 11:23:20 up 7 days, 14:43, 1 user, load average: 0.18, 0.36, 0.17, 83% HD used</pre>

<p>Then I name it something useful, like <code>/root/twitter.sh</code>, and add a <a href="http://en.wikipedia.org/wiki/Cron">crontab</a> entry:</p>

<pre>0 0 * * * /root/twitter.sh >& /dev/null</pre>

<p>And I'm set.</p>

<p>Naturally, this was designed to work for Linux, and would probably work on OS X and Windows/<a href="http://en.wikipedia.org/wiki/Cygwin">Cygwin</a> as well.</p>
</div>
	<div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/swenson/embed.js"></script><noscript><a href="http://swenson.disqus.com/?url=http://www.caswenson.com/2008_03_22_curl_twitter_crontab_happiness">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
	<div id="sidebar">
  <h2>Modern Cryptanalysis</h2>
	<div><br />
			<center><a href="http://www.amazon.com/gp/product/047013593X?ie=UTF8&tag=mathfigu-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=047013593X"><img border="0" src="images/21tcdykwdkl_aa_sl160_.jpg"></a><img src="http://www.assoc-amazon.com/e/ir?t=mathfigu-20&l=as2&o=1&a=047013593X" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></center>
	</div>
	<h2>Pages</h2>
		<ul>
	    <li><a href="about">About</a></li>
	    <li><a href="disclosures">Disclousres</a></li>
	    <li><a href="speaking">Speaking</a></li>
		  <li><a href="presentations">Presentations</a></li>
		  <li><a href="mcerrata"><em>Modern Cryptanalaysis</em> Errata</a></li>
		</ul>
	  <h2><a href="past">Archive</a></h2>
	</div>
	<div id="footer">
	<p id="legal">
	Content by Christopher Swenson (<a href="mailto:chris@caswenson.com">chris@caswenson.com</a>) | 
	Design adapted from <a href="http://www.freecsstemplates.org/preview/replenish">Replenish</a>
	</p>
</div>
</body>
</html>